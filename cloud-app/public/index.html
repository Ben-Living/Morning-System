<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <title>Daily Orientation</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">

    <!-- Header -->
    <header id="header">
      <div class="header-inner">
        <span id="header-date" class="header-date"></span>
        <button id="menu-btn" class="icon-btn" title="Settings">⋯</button>
      </div>
    </header>

    <!-- Global status bar -->
    <div id="checkin-status" class="status-bar hidden"></div>

    <!-- Main content area -->
    <main id="main">

      <!-- Primary: Check-In -->
      <div id="primary-checkin" class="primary-view">
        <div id="messages" class="messages-container"></div>
        <div class="input-area" id="checkin-input-area">
          <div class="input-row">
            <textarea
              id="chat-input"
              placeholder="Write here…"
              rows="1"
              autocomplete="off"
              autocorrect="on"
              spellcheck="true"
            ></textarea>
            <button id="send-btn" class="send-btn" title="Send">↑</button>
          </div>
          <div class="quick-actions">
            <button id="gen-dashboard-btn" class="btn-primary-sm">Generate dashboard →</button>
            <button id="quick-mode-btn" class="quick-btn">Quick mode</button>
          </div>
        </div>
      </div>

      <!-- Primary: Dashboard -->
      <div id="primary-dashboard" class="primary-view hidden">
        <div id="evening-prompt" class="evening-prompt hidden">
          <p>Getting towards the end of the day — good time for an evening reflection when you're ready.</p>
          <button id="evening-prompt-btn">Open →</button>
        </div>
        <div id="dashboard-content" class="prose-content">
          <div class="empty-state">
            <p>No dashboard yet.</p>
            <p class="muted">Complete your morning check-in, then generate it.</p>
          </div>
        </div>
      </div>

    </main>

    <!-- More bar -->
    <div id="more-bar" class="more-bar">
      <button id="more-btn" class="more-btn-inner">···</button>
    </div>

    <!-- Secondary panel (bottom sheet: Evening / Midday / Reflect) -->
    <div id="secondary-panel" class="panel hidden">
      <div class="secondary-header">
        <div class="secondary-tabs">
          <button class="secondary-tab active" data-sec="evening">Evening</button>
          <button class="secondary-tab" data-sec="midday">Midday</button>
          <button class="secondary-tab" data-sec="reflect">Reflect</button>
        </div>
        <button id="close-secondary-btn" class="icon-btn">✕</button>
      </div>

      <!-- Evening -->
      <div id="sec-evening" class="sec-content">
        <div id="evening-messages" class="messages-container"></div>
        <div class="input-area">
          <div class="input-row">
            <textarea
              id="evening-input"
              placeholder="How did the day go?"
              rows="1"
              autocomplete="off"
              autocorrect="on"
              spellcheck="true"
            ></textarea>
            <button id="evening-send-btn" class="send-btn" title="Send">↑</button>
          </div>
          <div class="quick-actions">
            <button class="quick-btn" id="complete-day-btn">Complete day &amp; save summary</button>
          </div>
        </div>
      </div>

      <!-- Midday -->
      <div id="sec-midday" class="sec-content hidden">
        <div id="midday-messages" class="messages-container"></div>
        <div class="input-area">
          <div class="input-row">
            <textarea
              id="midday-input"
              placeholder="How's the day tracking?"
              rows="1"
              autocomplete="off"
              autocorrect="on"
              spellcheck="true"
            ></textarea>
            <button id="midday-send-btn" class="send-btn" title="Send">↑</button>
          </div>
        </div>
      </div>

      <!-- Reflect -->
      <div id="sec-reflect" class="sec-content hidden">
        <!-- Living Orientation -->
        <div id="orientation-section" class="orientation-section">
          <div class="orientation-header">
            <span class="orientation-label">Living Orientation</span>
            <button id="orientation-edit-btn" class="orientation-edit-btn">Edit</button>
          </div>
          <div id="orientation-display" class="orientation-display muted">Loading…</div>
          <div id="orientation-editor" class="orientation-editor hidden">
            <textarea id="orientation-textarea" rows="6" placeholder="Your orienting commitments…"></textarea>
            <div class="orientation-actions">
              <button id="orientation-save-btn" class="btn-primary-sm">Save</button>
              <button id="orientation-cancel-btn" class="btn-secondary-sm">Cancel</button>
            </div>
          </div>
        </div>
        <div id="reflect-messages" class="messages-container"></div>
        <div class="input-area">
          <div class="input-row">
            <textarea
              id="reflect-input"
              placeholder="What's on top?"
              rows="1"
              autocomplete="off"
              autocorrect="on"
              spellcheck="true"
            ></textarea>
            <button id="reflect-send-btn" class="send-btn" title="Send">↑</button>
          </div>
        </div>
      </div>
    </div>

    <div id="secondary-overlay" class="overlay hidden"></div>

    <!-- Settings Panel -->
    <div id="settings-panel" class="panel hidden">
      <div class="panel-header">
        <h2>Settings</h2>
        <button id="close-settings" class="icon-btn">✕</button>
      </div>
      <div class="panel-body">
        <section>
          <h3>Google Accounts</h3>
          <div id="accounts-list" class="accounts-list"></div>
          <div class="connect-row">
            <input id="account-label" type="text" placeholder="Label (e.g. personal, work)" />
            <button id="connect-google-btn" class="btn-secondary">Connect Google account</button>
          </div>
        </section>

        <section>
          <h3>Oura Ring</h3>
          <div id="oura-status" class="agent-status">Checking…</div>
          <div class="connect-row" id="oura-connect-row" style="margin-top:8px"></div>
        </section>

        <section>
          <h3>Mac Agent</h3>
          <div id="agent-status" class="agent-status">Checking…</div>
        </section>

        <section>
          <h3>Tracked Items</h3>
          <div id="tracked-items-list"></div>
          <div class="connect-row">
            <input id="new-tracked-item" type="text" placeholder="Add item to track…" />
            <button id="add-tracked-btn" class="btn-secondary">Add</button>
          </div>
        </section>
      </div>
    </div>

    <div id="settings-overlay" class="overlay hidden"></div>

    <!-- Loading overlay -->
    <div id="loading" class="loading-overlay hidden">
      <div class="spinner"></div>
    </div>

  </div>

  <script src="app.js"></script>
</body>
</html>
